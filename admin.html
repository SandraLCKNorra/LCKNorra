<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin â€“ LC Norra</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 2em auto;
      max-width: 600px;
      padding: 0 1em;
      background-color: #f0f0f0;
    }
    input, textarea {
      width: 100%;
      padding: 0.6em;
      margin: 0.4em 0;
    }
    button {
      padding: 0.6em 1.2em;
      margin-top: 1em;
    }
    .hidden { display: none; }
    img { max-width: 100%; margin: 1em 0; }
  </style>
</head>
<body>
  <h1>Adminpanel</h1>
  <div id="login">
    <p>Ange lÃ¶senord:</p>
    <input type="password" id="losen" />
    <button onclick="loggaIn()">Logga in</button>
    <p id="felmeddelande" style="color:red;"></p>
  </div>

  <div id="admin" class="hidden">
    <label>Rubrik:</label>
    <input id="rubrik" />
    <label>Bild (valfri â€“ klistra in URL eller base64):</label>
    <input type="file" id="bild" accept="image/*" onchange="laddaBild(event)" />
<img id="preview" style="display:none; max-width:100%; margin-top:1em;" />
    <label>Text:</label>
    <textarea id="text"></textarea>
    <button onclick="spara()">Spara inlÃ¤gg</button>
    <h2>InlÃ¤gg</h2>
    <div id="allaInlagg"></div>
  </div>

  <script>
    const korrektLosen = "admin123";
    function loggaIn() {
      const input = document.getElementById("losen").value;
      if (input === korrektLosen) {
        document.getElementById("login").style.display = "none";
        document.getElementById("admin").classList.remove("hidden");
        visaAlla();
      } else {
        document.getElementById("felmeddelande").innerText = "Fel lÃ¶senord!";
      }
    }
let bildData = "";

function laddaBild(event) {
  const fil = event.target.files[0];
  if (!fil) return;

  const reader = new FileReader();
  reader.onload = function(e) {
    bildData = e.target.result;
    const preview = document.getElementById("preview");
    preview.src = bildData;
    preview.style.display = "block";
  };
  reader.readAsDataURL(fil);
}

    function spara() {
      const rubrik = document.getElementById("rubrik").value;
      const text = document.getElementById("text").value;
      const bild = bildData;
      const tid = new Date().toLocaleString();
      const nytt = { rubrik, text, bild, tid };
      let sparade = JSON.parse(localStorage.getItem("inlagg") || "[]");
      sparade.push(nytt);
      localStorage.setItem("inlagg", JSON.stringify(sparade));
      visaAlla();
      document.getElementById("rubrik").value = "";
      document.getElementById("text").value = "";
      document.getElementById("bild").value = "";
    }

    function visaAlla() {
      const container = document.getElementById("allaInlagg");
      const sparade = JSON.parse(localStorage.getItem("inlagg") || "[]");
      container.innerHTML = "";
      sparade.reverse().forEach((post, index) => {
        container.innerHTML += `
          <div style="background:#fff; margin:1em 0; padding:1em;">
            <strong>${post.rubrik}</strong><br/>
            ${post.bild ? `<img src="${post.bild}">` : ""}
            <p>${post.text}</p>
            <small>${post.tid}</small><br/>
            <button onclick="radera(${sparade.length - 1 - index})">ðŸ—‘ Radera</button>
          </div>
        `;
      });
    }

    function radera(index) {
      let sparade = JSON.parse(localStorage.getItem("inlagg") || "[]");
      sparade.splice(index, 1);
      localStorage.setItem("inlagg", JSON.stringify(sparade));
      visaAlla();
    }
  </script>
</body>
</html>
